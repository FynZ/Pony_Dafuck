<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
     <head>
          <meta charset="utf-8" />
          <meta http-equiv="X-UA-Compatible" content="IE=edge" />
          <!-- Tell the browser to be responsive to screen width -->
          <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />


          <title>PonyDaFuck</title>


          <link rel="icon" type="image/png" href="../../images/favicon.ico" th:href="@{/images/favicon.ico}" />
          <link rel="stylesheet" href="../resources/css/loader.css" th:href="@{/css/loader.css}" type="text/css" />
          <link rel="stylesheet" href="../static/plugins/bootstrap/css/bootstrap.min.css" th:href="@{/plugins/bootstrap/css/bootstrap.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/css/ionicons.min.css" th:href="@{/css/ionicons.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/css/AdminLTE.min.css" th:href="@{/css/AdminLTE.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/css/skin.min.css" th:href="@{/css/skin.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/css/pony.css" th:href="@{/css/pony.css}" type="text/css" />
          <link rel="stylesheet" href="../static/plugins/jquery-confirm/jquery-confirm.min.css" th:href="@{/plugins/jquery-confirm/jquery-confirm.min.css}" type="text/css" />
          <link rel="stylesheet" href="../static/plugins/datatables/datatables.min.css" th:href="@{/plugins/datatables/datatables.min.css}" type="text/css" />
          <link rel="stylesheet" type="text/css" 
                href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/b-1.5.1/b-colvis-1.5.1/b-html5-1.5.1/b-print-1.5.1/cr-1.4.1/r-2.2.1/datatables.min.css"/>
     </head>
     <body class="hold-transition skin-blue sidebar-mini">

          <div th:replace="fragments/loader"></div>

          <div class="master-page">

               <header th:replace="fragments/header"></header>

               <aside th:replace="fragments/left-sidebar"></aside>
               <div class="content-wrapper">
                    <div class="content-body">
                         <section id="main-content" class="content"></section>
                    </div>
               </div>

               <aside th:replace="fragments/right-sidebar"></aside>

               <!-- Add the sidebar's background. This div must be placed
                      immediately after the control sidebar -->
               <div class="control-sidebar-bg"></div>

               <footer th:replace="fragments/footer"></footer>               
          </div>

          <script type="text/javascript" src="../static/plugins/jquery/jquery-3.3.1.min.js" th:src="@{/plugins/jquery/jquery-3.3.1.min.js}"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" 
          integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
          <script type="text/javascript" src="../static/plugins/bootstrap/js/bootstrap.min.js" th:src="@{/plugins/bootstrap/js/bootstrap.min.js}"></script>
          <script type="text/javascript" src="../static/plugins/icheck/icheck.min.js" th:src="@{/plugins/icheck/icheck.min.js}"></script>
          <script type="text/javascript" src="../static/plugins/jquery-confirm/jquery-confirm.min.js" th:src="@{/plugins/jquery-confirm/jquery-confirm.min.js}"></script>
          <script type="text/javascript" src="../static/plugins/datatables/datatables.min.js" th:src="@{/plugins/datatables/datatables.min.js}"></script>
          <script type="text/javascript" 
          src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/b-1.5.1/b-colvis-1.5.1/b-html5-1.5.1/b-print-1.5.1/cr-1.4.1/r-2.2.1/datatables.min.js"></script>
          <script type="text/javascript" src="../static/plugins/moment/moment.min.js" th:src="@{/plugins/moment/moment.min.js}"></script>
          <script type="text/javascript" src="../static/js/adminlte.min.js" th:src="@{/js/adminlte.min.js}"></script>

          <script type="text/javascript" th:inline="javascript" charset="UTF-8">
               /*<![CDATA[*/


               var loadContent;

               $(function () {

                    const ORIGIN = window.location.origin + "/";

                    loadContent = function (url) {

                         $.ajax({
                              url: url,
                              type: "GET",
                              async: true
                         }).done(function (data) {
                              $('#loader').remove();
                              $("#main-content").html(data);

                              var contentTitle = $(".content-title").detach();
                              $("#main-title").text(contentTitle.text());
                         });
                    };


                    $("body").on("click", ".custom-link", function () {
                         loadContent(ORIGIN + $(this).attr("href"));
                         return false;
                    });



                    function submitForm(element, event) {

                         event.preventDefault();

                         var form = element.closest("form").eq(0);
                         $.ajax({
                              type: form.attr("method"),
                              url: form.attr("action"),
                              data: form.serialize()
                         }).done(function (data) {

                              $("#main-content").html(data);

                              var contentTitle = $(".content-title").detach();
                              $("#main-title").text(contentTitle.text());
                         });
                         return false;
                    }

                    $("body").on("click", ".form-submit", function (event) {
                         submitForm($(this), event);
                         return false;
                    });

                    setTimeout(function () {
                         $('body').addClass('loaded');
                    }, 2500);

//                    $(window).load(function () {
//                         $("#loader-wrapper").fadeOut();
//                    });


                    loadContent(ORIGIN + "roles/");
               });
               /*]]>*/
          </script>
     </body>
</html>